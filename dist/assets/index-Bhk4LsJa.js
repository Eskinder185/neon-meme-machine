(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();const l=t=>document.getElementById(t),s=l("canvas"),u=s.getContext("2d",{willReadFrequently:!0});function $(){const t=localStorage.getItem("memeLab-theme")||"dark";k(t),T(t)}function U(){const e=(document.documentElement.getAttribute("data-theme")||"dark")==="dark"?"light":"dark";k(e),localStorage.setItem("memeLab-theme",e),T(e)}function k(t){document.documentElement.setAttribute("data-theme",t),document.body.setAttribute("data-theme",t)}function T(t){const e=document.querySelector(".theme-icon");e&&(e.textContent=t==="dark"?"â˜€ï¸":"ðŸŒ™")}function w(t){const e=document.getElementById(t+"Page");!e||document.querySelector(".page.active")===e||requestAnimationFrame(()=>{document.querySelectorAll(".page.active, .nav-link.active").forEach(i=>{i.classList.remove("active")}),e.classList.add("active");const a=document.querySelector(`[data-page="${t}"]`);a&&a.classList.add("active");const o=new URL(window.location);o.searchParams.set("page",t),window.history.pushState({page:t},"",o),R(t)})}function R(t){switch(t){case"home":A();break;case"forge":L();break}}function P(){const e=new URLSearchParams(window.location.search).get("page")||"home";w(e)}window.addEventListener("popstate",t=>{const e=t.state?.page||"home";w(e)});document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("themeToggle");t&&t.addEventListener("click",a=>{a.preventDefault(),U()}),document.querySelectorAll("[data-page]").forEach(a=>{a.addEventListener("click",o=>{o.preventDefault();const i=a.getAttribute("data-page");w(i);const c=document.querySelector(".nav-menu"),m=document.querySelector(".hamburger");c&&m&&(c.classList.remove("active"),m.classList.remove("active"))})});const e=document.querySelector(".hamburger"),n=document.querySelector(".nav-menu");e&&n&&e.addEventListener("click",()=>{e.classList.toggle("active"),n.classList.toggle("active")})});function N(){document.querySelectorAll(".faq-question").forEach(t=>{t.addEventListener("click",()=>{const e=t.parentElement,n=e.classList.contains("active");document.querySelectorAll(".faq-item").forEach(a=>{a.classList.remove("active")}),n||e.classList.add("active")})})}let x=null,I=0;function A(){const t=document.getElementById("featuredMemes");if(!t)return;const e=Date.now();if(x&&e-I<1e3)return;const n=JSON.parse(localStorage.getItem("neon-memes")||"[]"),a=n.length===0?"empty":n.slice(0,6).join("");if(x===a)return;if(x=a,I=e,n.length===0){t.innerHTML=`
      <div class="card placeholder-card">
        <div class="placeholder-content">
          <div class="placeholder-icon">ðŸŽ¨</div>
          <h3>Your meme could be here</h3>
          <p>Start creating to see your masterpieces featured!</p>
        </div>
      </div>
      <div class="card trending-card">
        <div class="trending-badge">ðŸ”¥ Trending</div>
        <div class="placeholder-content">
          <div class="placeholder-icon">âš¡</div>
          <h3>Sample Meme</h3>
          <p>This could be your viral creation!</p>
        </div>
      </div>
      <div class="card cta-card">
        <div class="placeholder-content">
          <div class="placeholder-icon">ðŸš€</div>
          <h3>Ready to forge?</h3>
          <p>Join the neon revolution!</p>
          <button class="btn-primary" data-page="forge">Forge Now</button>
        </div>
      </div>
    `;return}const o=n.slice(0,6);t.innerHTML=o.map((i,c)=>`
    <div class="card">
      <img src="${i}" alt="Featured meme ${c+1}" loading="lazy" />
    </div>
  `).join("")}function J(){const t=document.getElementById("quickDemo");t&&t.addEventListener("click",()=>{const e="https://via.placeholder.com/400x400/1a1a2e/00e5ff?text=Sample+Meme";w("forge"),setTimeout(()=>{l("imageUrl")&&(l("imageUrl").value=e,b(e)),l("topText")&&(l("topText").value="Quick Demo"),l("bottomText")&&(l("bottomText").value="Try MemeForge!"),f()},100)})}const r={img:new Image,top:{text:"",x:s.width/2,y:90,active:!0},bottom:{text:"",x:s.width/2,y:s.height-90,active:!1},fontFamily:getComputedStyle(document.documentElement).getPropertyValue("--meme-font")||"Impact, Haettenschweiler, 'Arial Black', sans-serif",maxFont:72,stroke:!0,glow:!0},H=["slur1","slur2","slur3"];function S(t,e,n){const a=t.split(/\s+/),o=[];let i="";for(let c of a){const m=i?i+" "+c:c;u.measureText(m).width>e&&i?(o.push(i),i=c):i=m}return i&&o.push(i),{lines:o,height:o.length*n*1.1}}function j(t,e,n){let a=n;u.font=`${a}px ${r.fontFamily}`;let{lines:o}=S(t,e,a);for(;o.some(i=>u.measureText(i).width>e)&&a>10;)a-=2,u.font=`${a}px ${r.fontFamily}`,o=S(t,e,a).lines;return a}function z(t,e,n,a){const o=u.getImageData(Math.max(0,t),Math.max(0,e),Math.min(s.width-t,n),Math.min(s.height-e,a)).data;let i=0;for(let m=0;m<o.length;m+=4){const g=o[m],p=o[m+1],v=o[m+2];i+=.2126*g+.7152*p+.0722*v}const c=o.length/4||1;return i/c}function W({fontSize:t}){u.font=`${t}px ${r.fontFamily}`,u.textBaseline="middle",u.textAlign="center",u.lineJoin="round",u.miterLimit=2}function f(){u.clearRect(0,0,s.width,s.height);const t=r.img.width/r.img.height||1;let e=s.width,n=s.height,a=0,o=0;t>1?(n=s.width/t,o=(s.height-n)/2):t<1&&(e=s.height*t,a=(s.width-e)/2),r.img.complete&&r.img.naturalWidth?u.drawImage(r.img,a,o,e,n):(u.fillStyle="#111",u.fillRect(0,0,s.width,s.height));const c=s.width-24*2;["top","bottom"].forEach(m=>{const g=r[m];if(!g.text)return;const p=j(g.text,c,r.maxFont),v=S(g.text,c,p).lines;W({fontSize:p});const d=p*1.1,h=d*v.length,E=g.y-h/2,B=z(0,E-6,s.width,h+12)<140?"#ffffff":"#000000";r.glow?(u.shadowBlur=18,u.shadowColor="rgba(0,229,255,.75)"):u.shadowBlur=0,v.forEach((M,O)=>{const F=g.y-h/2+O*d+d/2;r.stroke&&(u.strokeStyle=B==="#fff"?"#000":"#fff",u.lineWidth=Math.max(2,p/12),u.strokeText(M,g.x,F)),u.fillStyle=B,u.fillText(M,g.x,F)}),u.shadowBlur=0})}function b(t){r.img=new Image,r.img.crossOrigin="anonymous",r.img.onload=f,r.img.onerror=()=>alert("Could not load image. Try another URL or upload."),r.img.src=t}function C(t){const e=new FileReader;e.onload=n=>b(n.target.result),e.readAsDataURL(t)}let y=null;s.addEventListener("pointerdown",t=>{const e=s.getBoundingClientRect(),n=(t.clientX-e.left)*(s.width/e.width),a=(t.clientY-e.top)*(s.height/e.height),o=Math.abs(a-r.top.y),i=Math.abs(a-r.bottom.y);y=o<i?"top":"bottom",r[y].x=n,r[y].y=a,f()});s.addEventListener("pointermove",t=>{if(!y)return;const e=s.getBoundingClientRect();r[y].x=(t.clientX-e.left)*(s.width/e.width),r[y].y=(t.clientY-e.top)*(s.height/e.height),f()});window.addEventListener("pointerup",()=>y=null);document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("memeForm");t&&t.addEventListener("submit",d=>{d.preventDefault();const h=`${r.top.text} ${r.bottom.text}`.toLowerCase();if(H.some(E=>E&&h.includes(E))){alert("Caption includes blocked words. Please edit.");return}f()});const e=l("topText"),n=l("bottomText"),a=l("imageUrl"),o=l("imageFile"),i=l("fontFamily"),c=l("maxFont"),m=l("stroke"),g=l("glow"),p=l("clearBtn"),v=l("randomBtn");e&&e.addEventListener("input",d=>{r.top.text=d.target.value,f()}),n&&n.addEventListener("input",d=>{r.bottom.text=d.target.value,f()}),a&&a.addEventListener("change",d=>{d.target.value&&b(d.target.value)}),o&&o.addEventListener("change",d=>{const h=d.target.files?.[0];h&&C(h)}),i&&i.addEventListener("change",d=>{r.fontFamily=d.target.value,f()}),c&&c.addEventListener("input",d=>{r.maxFont=+d.target.value,f()}),m&&m.addEventListener("change",d=>{r.stroke=d.target.checked,f()}),g&&g.addEventListener("change",d=>{r.glow=d.target.checked,f()}),p&&p.addEventListener("click",()=>{t&&t.reset(),r.top.text="",r.bottom.text="",r.fontFamily="Impact, Haettenschweiler, 'Arial Black', sans-serif",r.maxFont=72,r.stroke=!0,r.glow=!0,f()}),v&&v.addEventListener("click",()=>{const d=["This is fine.","Deploying on Friday","AI did it","When prod = dev","Cloud bill be like"],h=["Send help.","it's a feature","pls no rate limit","works on my machine","ship it ðŸš€"];e&&(e.value=r.top.text=d[Math.random()*d.length|0]),n&&(n.value=r.bottom.text=h[Math.random()*h.length|0]),f()})});document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".stage");t&&(["dragenter","dragover","dragleave","drop"].forEach(e=>{t.addEventListener(e,n=>{n.preventDefault(),n.stopPropagation()})}),t.addEventListener("drop",e=>{const n=e.dataTransfer.files?.[0];n&&n.type.startsWith("image/")&&C(n)}))});document.addEventListener("DOMContentLoaded",()=>{const t=l("downloadBtn");t&&t.addEventListener("click",()=>{const e=document.createElement("a");e.href=s.toDataURL("image/png"),e.download="meme.png",e.click()})});function L(){const t=l("memeGallery");if(!t)return;const e=JSON.parse(localStorage.getItem("neon-memes")||"[]");t.innerHTML="",e.forEach((n,a)=>{const o=document.createElement("div");o.className="card",o.innerHTML=`<img src="${n}" alt="Saved meme ${a+1}"/><div class="bar">
      <button data-i="${a}" class="dl">Download</button>
      <button data-i="${a}" class="del">Delete</button></div>`,t.appendChild(o)}),t.querySelectorAll(".dl").forEach(n=>n.onclick=a=>{const o=+a.target.dataset.i,i=JSON.parse(localStorage.getItem("neon-memes")||"[]"),c=document.createElement("a");c.href=i[o],c.download=`meme-${o+1}.png`,c.click()}),t.querySelectorAll(".del").forEach(n=>n.onclick=a=>{const o=+a.target.dataset.i,i=JSON.parse(localStorage.getItem("neon-memes")||"[]");i.splice(o,1),localStorage.setItem("neon-memes",JSON.stringify(i)),L()})}document.addEventListener("DOMContentLoaded",()=>{const t=l("saveBtn"),e=l("shareBtn");t&&t.addEventListener("click",()=>{const n=JSON.parse(localStorage.getItem("neon-memes")||"[]");n.unshift(s.toDataURL("image/png")),localStorage.setItem("neon-memes",JSON.stringify(n.slice(0,24))),L()}),e&&e.addEventListener("click",()=>{const n=new URLSearchParams({u:l("imageUrl")?.value||"",t:l("topText")?.value||"",b:l("bottomText")?.value||""}),a=`${location.origin}${location.pathname}?${n.toString()}`;navigator.clipboard?.writeText(a),alert("Share link copied to clipboard.")})});(function(){const e=new URLSearchParams(location.search);e.get("u")&&(l("imageUrl").value=e.get("u"),b(e.get("u"))),e.get("t")&&(l("topText").value=r.top.text=e.get("t")),e.get("b")&&(l("bottomText").value=r.bottom.text=e.get("b")),f()})();function K(t){const e=t.split(",")[1]||"";return Math.floor(e.length*3/4)}async function D(){const t=document.getElementById("storageDump"),e=JSON.parse(localStorage.getItem("neon-memes")||"[]");let n=0,a=[];e.forEach((c,m)=>{const g=K(c);n+=g,a.push(`#${m+1} - ~${(g/1024).toFixed(1)} KB`)});let o=0;for(let c=0;c<localStorage.length;c++){const m=localStorage.key(c),g=localStorage.getItem(m)||"";o+=(m.length+g.length)*2}let i="Cache Storage: n/a";if("caches"in window){const c=await caches.keys(),m=[];for(const g of c){const v=await(await caches.open(g)).keys();m.push(`${g}: ${v.length} item(s)`)}i=m.join(" | ")||"Cache Storage: empty"}t.textContent=`Local "neon-memes" items: ${e.length}
`+a.join(`
`)+`

Approx images total: ${(n/1024).toFixed(1)} KB
Estimated LocalStorage usage (all keys): ${(o/1024).toFixed(1)} KB
${i}

Tip: Clear with the "Clear All" button or via DevTools â†’ Application.`}document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("inspectBtn"),e=document.getElementById("clearAllBtn"),n=document.getElementById("exportJsonBtn");t&&(t.onclick=D),e&&(e.onclick=()=>{confirm("Delete all saved memes on this device?")&&(localStorage.removeItem("neon-memes"),L(),D())}),n&&n.addEventListener("click",()=>{const a=localStorage.getItem("neon-memes")||"[]",o=new Blob([a],{type:"application/json"}),i=document.createElement("a");i.href=URL.createObjectURL(o),i.download="neon-memes-export.json",i.click(),URL.revokeObjectURL(i.href)})});function q(){const t=document.getElementById("heroParticles");if(t){t.innerHTML="";for(let e=0;e<15;e++){const n=document.createElement("div");n.className="particle",n.style.left=Math.random()*100+"%",n.style.top=Math.random()*100+"%",n.style.animationDelay=Math.random()*6+"s";const a=2+Math.random()*4;n.style.width=a+"px",n.style.height=a+"px",t.appendChild(n)}}}function Y(){const t={threshold:.1,rootMargin:"0px 0px -50px 0px"},e=new IntersectionObserver(n=>{n.forEach(a=>{a.isIntersecting&&(a.target.classList.add("fade-in-up"),e.unobserve(a.target))})},t);document.querySelectorAll(".card, .mission-card, .feature-item, .timeline-item, .faq-item, .feature-card").forEach(n=>{e.observe(n)})}function Q(){document.querySelectorAll(".page").forEach(e=>{e.style.transition="all 0.5s cubic-bezier(0.4, 0, 0.2, 1)"})}function G(){let t=0;document.addEventListener("touchend",function(o){const i=new Date().getTime();i-t<=300&&o.preventDefault(),t=i},!1);const e=document.querySelector(".hamburger"),n=document.querySelector(".nav-menu");e&&n&&(document.addEventListener("click",i=>{!e.contains(i.target)&&!n.contains(i.target)&&(n.classList.remove("active"),e.classList.remove("active"))}),document.querySelectorAll(".nav-link").forEach(i=>{i.addEventListener("click",()=>{n.classList.remove("active"),e.classList.remove("active")})}));const a=document.getElementById("canvas");a&&(a.addEventListener("touchstart",o=>{o.preventDefault()},{passive:!1}),a.addEventListener("touchmove",o=>{o.preventDefault()},{passive:!1}))}document.addEventListener("DOMContentLoaded",()=>{G(),$(),P(),N(),A(),J(),L(),q(),Y(),Q(),setTimeout(()=>{const t=localStorage.getItem("memeLab-theme")||"dark";k(t),T(t),setTimeout(()=>{q()},500)},100)});
