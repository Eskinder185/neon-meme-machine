(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();const l=e=>document.getElementById(e),s=l("canvas"),u=s.getContext("2d",{willReadFrequently:!0});function O(){const e=localStorage.getItem("memeLab-theme")||"dark";k(e),T(e)}function U(){const t=(document.documentElement.getAttribute("data-theme")||"dark")==="dark"?"light":"dark";k(t),localStorage.setItem("memeLab-theme",t),T(t)}function k(e){document.documentElement.setAttribute("data-theme",e),document.body.setAttribute("data-theme",e)}function T(e){const t=document.querySelector(".theme-icon");t&&(t.textContent=e==="dark"?"â˜€ï¸":"ðŸŒ™")}function E(e){const t=document.getElementById(e+"Page");!t||document.querySelector(".page.active")===t||requestAnimationFrame(()=>{document.querySelectorAll(".page.active, .nav-link.active").forEach(i=>{i.classList.remove("active")}),t.classList.add("active");const o=document.querySelector(`[data-page="${e}"]`);o&&o.classList.add("active");const a=new URL(window.location);a.searchParams.set("page",e),window.history.pushState({page:e},"",a),R(e)})}function R(e){switch(e){case"home":C();break;case"forge":L();break}}function P(){const t=new URLSearchParams(window.location.search).get("page")||"home";E(t)}window.addEventListener("popstate",e=>{const t=e.state?.page||"home";E(t)});document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("themeToggle");e&&e.addEventListener("click",o=>{o.preventDefault(),U()}),document.querySelectorAll("[data-page]").forEach(o=>{o.addEventListener("click",a=>{a.preventDefault();const i=o.getAttribute("data-page");E(i);const c=document.querySelector(".nav-menu"),m=document.querySelector(".hamburger");c&&m&&(c.classList.remove("active"),m.classList.remove("active"))})});const t=document.querySelector(".hamburger"),n=document.querySelector(".nav-menu");t&&n&&t.addEventListener("click",()=>{t.classList.toggle("active"),n.classList.toggle("active")})});function N(){document.querySelectorAll(".faq-question").forEach(e=>{e.addEventListener("click",()=>{const t=e.parentElement,n=t.classList.contains("active");document.querySelectorAll(".faq-item").forEach(o=>{o.classList.remove("active")}),n||t.classList.add("active")})})}let b=null,I=0;function C(){const e=document.getElementById("featuredMemes");if(!e)return;const t=Date.now();if(b&&t-I<1e3)return;const n=JSON.parse(localStorage.getItem("neon-memes")||"[]"),o=n.length===0?"empty":n.slice(0,6).join("");if(b===o)return;if(b=o,I=t,n.length===0){e.innerHTML=`
      <div class="card placeholder-card">
        <div class="placeholder-content">
          <div class="placeholder-icon">ðŸŽ¨</div>
          <h3>Your meme could be here</h3>
          <p>Start creating to see your masterpieces featured!</p>
        </div>
      </div>
      <div class="card trending-card">
        <div class="trending-badge">ðŸ”¥ Trending</div>
        <div class="placeholder-content">
          <div class="placeholder-icon">âš¡</div>
          <h3>Sample Meme</h3>
          <p>This could be your viral creation!</p>
        </div>
      </div>
      <div class="card cta-card">
        <div class="placeholder-content">
          <div class="placeholder-icon">ðŸš€</div>
          <h3>Ready to forge?</h3>
          <p>Join the neon revolution!</p>
          <button class="btn-primary" data-page="forge">Forge Now</button>
        </div>
      </div>
    `;return}const a=n.slice(0,6);e.innerHTML=a.map((i,c)=>`
    <div class="card">
      <img src="${i}" alt="Featured meme ${c+1}" loading="lazy" />
    </div>
  `).join("")}function J(){const e=document.getElementById("quickDemo");e&&e.addEventListener("click",()=>{const t="https://via.placeholder.com/400x400/1a1a2e/00e5ff?text=Sample+Meme";E("forge"),setTimeout(()=>{l("imageUrl")&&(l("imageUrl").value=t,x(t)),l("topText")&&(l("topText").value="Quick Demo"),l("bottomText")&&(l("bottomText").value="Try MemeForge!"),h()},100)})}const r={img:new Image,top:{text:"",x:s.width/2,y:90,active:!0},bottom:{text:"",x:s.width/2,y:s.height-90,active:!1},fontFamily:getComputedStyle(document.documentElement).getPropertyValue("--meme-font")||"Impact, Haettenschweiler, 'Arial Black', sans-serif",maxFont:72,stroke:!0,glow:!0},H=["slur1","slur2","slur3"];function S(e,t,n){const o=e.split(/\s+/),a=[];let i="";for(let c of o){const m=i?i+" "+c:c;u.measureText(m).width>t&&i?(a.push(i),i=c):i=m}return i&&a.push(i),{lines:a,height:a.length*n*1.1}}function j(e,t,n){let o=n;u.font=`${o}px ${r.fontFamily}`;let{lines:a}=S(e,t,o);for(;a.some(i=>u.measureText(i).width>t)&&o>10;)o-=2,u.font=`${o}px ${r.fontFamily}`,a=S(e,t,o).lines;return o}function z(e,t,n,o){const a=u.getImageData(Math.max(0,e),Math.max(0,t),Math.min(s.width-e,n),Math.min(s.height-t,o)).data;let i=0;for(let m=0;m<a.length;m+=4){const g=a[m],p=a[m+1],v=a[m+2];i+=.2126*g+.7152*p+.0722*v}const c=a.length/4||1;return i/c}function W({fontSize:e}){u.font=`${e}px ${r.fontFamily}`,u.textBaseline="middle",u.textAlign="center",u.lineJoin="round",u.miterLimit=2}function h(){u.clearRect(0,0,s.width,s.height);const e=r.img.width/r.img.height||1;let t=s.width,n=s.height,o=0,a=0;e>1?(n=s.width/e,a=(s.height-n)/2):e<1&&(t=s.height*e,o=(s.width-t)/2),r.img.complete&&r.img.naturalWidth?u.drawImage(r.img,o,a,t,n):(u.fillStyle="#111",u.fillRect(0,0,s.width,s.height));const c=s.width-24*2;["top","bottom"].forEach(m=>{const g=r[m];if(!g.text)return;const p=j(g.text,c,r.maxFont),v=S(g.text,c,p).lines;W({fontSize:p});const d=p*1.1,f=d*v.length,w=g.y-f/2,B=z(0,w-6,s.width,f+12)<140?"#ffffff":"#000000";r.glow?(u.shadowBlur=18,u.shadowColor="rgba(0,229,255,.75)"):u.shadowBlur=0,v.forEach((F,$)=>{const M=g.y-f/2+$*d+d/2;r.stroke&&(u.strokeStyle=B==="#fff"?"#000":"#fff",u.lineWidth=Math.max(2,p/12),u.strokeText(F,g.x,M)),u.fillStyle=B,u.fillText(F,g.x,M)}),u.shadowBlur=0})}function x(e){r.img=new Image,r.img.crossOrigin="anonymous",r.img.onload=h,r.img.onerror=()=>alert("Could not load image. Try another URL or upload."),r.img.src=e}function q(e){const t=new FileReader;t.onload=n=>x(n.target.result),t.readAsDataURL(e)}let y=null;s.addEventListener("pointerdown",e=>{const t=s.getBoundingClientRect(),n=(e.clientX-t.left)*(s.width/t.width),o=(e.clientY-t.top)*(s.height/t.height),a=Math.abs(o-r.top.y),i=Math.abs(o-r.bottom.y);y=a<i?"top":"bottom",r[y].x=n,r[y].y=o,h()});s.addEventListener("pointermove",e=>{if(!y)return;const t=s.getBoundingClientRect();r[y].x=(e.clientX-t.left)*(s.width/t.width),r[y].y=(e.clientY-t.top)*(s.height/t.height),h()});window.addEventListener("pointerup",()=>y=null);document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("memeForm");e&&e.addEventListener("submit",d=>{d.preventDefault();const f=`${r.top.text} ${r.bottom.text}`.toLowerCase();if(H.some(w=>w&&f.includes(w))){alert("Caption includes blocked words. Please edit.");return}h()});const t=l("topText"),n=l("bottomText"),o=l("imageUrl"),a=l("imageFile"),i=l("fontFamily"),c=l("maxFont"),m=l("stroke"),g=l("glow"),p=l("clearBtn"),v=l("randomBtn");t&&t.addEventListener("input",d=>{r.top.text=d.target.value,h()}),n&&n.addEventListener("input",d=>{r.bottom.text=d.target.value,h()}),o&&o.addEventListener("change",d=>{d.target.value&&x(d.target.value)}),a&&a.addEventListener("change",d=>{const f=d.target.files?.[0];f&&q(f)}),i&&i.addEventListener("change",d=>{r.fontFamily=d.target.value,h()}),c&&c.addEventListener("input",d=>{r.maxFont=+d.target.value,h()}),m&&m.addEventListener("change",d=>{r.stroke=d.target.checked,h()}),g&&g.addEventListener("change",d=>{r.glow=d.target.checked,h()}),p&&p.addEventListener("click",()=>{e&&e.reset(),r.top.text="",r.bottom.text="",r.fontFamily="Impact, Haettenschweiler, 'Arial Black', sans-serif",r.maxFont=72,r.stroke=!0,r.glow=!0,h()}),v&&v.addEventListener("click",()=>{const d=["This is fine.","Deploying on Friday","AI did it","When prod = dev","Cloud bill be like"],f=["Send help.","it's a feature","pls no rate limit","works on my machine","ship it ðŸš€"];t&&(t.value=r.top.text=d[Math.random()*d.length|0]),n&&(n.value=r.bottom.text=f[Math.random()*f.length|0]),h()})});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".stage");e&&(["dragenter","dragover","dragleave","drop"].forEach(t=>{e.addEventListener(t,n=>{n.preventDefault(),n.stopPropagation()})}),e.addEventListener("drop",t=>{const n=t.dataTransfer.files?.[0];n&&n.type.startsWith("image/")&&q(n)}))});document.addEventListener("DOMContentLoaded",()=>{const e=l("downloadBtn");e&&e.addEventListener("click",()=>{const t=document.createElement("a");t.href=s.toDataURL("image/png"),t.download="meme.png",t.click()})});function L(){const e=l("memeGallery");if(!e)return;const t=JSON.parse(localStorage.getItem("neon-memes")||"[]");e.innerHTML="",t.forEach((n,o)=>{const a=document.createElement("div");a.className="card",a.innerHTML=`<img src="${n}" alt="Saved meme ${o+1}"/><div class="bar">
      <button data-i="${o}" class="dl">Download</button>
      <button data-i="${o}" class="del">Delete</button></div>`,e.appendChild(a)}),e.querySelectorAll(".dl").forEach(n=>n.onclick=o=>{const a=+o.target.dataset.i,i=JSON.parse(localStorage.getItem("neon-memes")||"[]"),c=document.createElement("a");c.href=i[a],c.download=`meme-${a+1}.png`,c.click()}),e.querySelectorAll(".del").forEach(n=>n.onclick=o=>{const a=+o.target.dataset.i,i=JSON.parse(localStorage.getItem("neon-memes")||"[]");i.splice(a,1),localStorage.setItem("neon-memes",JSON.stringify(i)),L()})}document.addEventListener("DOMContentLoaded",()=>{const e=l("saveBtn"),t=l("shareBtn");e&&e.addEventListener("click",()=>{const n=JSON.parse(localStorage.getItem("neon-memes")||"[]");n.unshift(s.toDataURL("image/png")),localStorage.setItem("neon-memes",JSON.stringify(n.slice(0,24))),L()}),t&&t.addEventListener("click",()=>{const n=new URLSearchParams({u:l("imageUrl")?.value||"",t:l("topText")?.value||"",b:l("bottomText")?.value||""}),o=`${location.origin}${location.pathname}?${n.toString()}`;navigator.clipboard?.writeText(o),alert("Share link copied to clipboard.")})});(function(){const t=new URLSearchParams(location.search);t.get("u")&&(l("imageUrl").value=t.get("u"),x(t.get("u"))),t.get("t")&&(l("topText").value=r.top.text=t.get("t")),t.get("b")&&(l("bottomText").value=r.bottom.text=t.get("b")),h()})();function K(e){const t=e.split(",")[1]||"";return Math.floor(t.length*3/4)}async function D(){const e=document.getElementById("storageDump"),t=JSON.parse(localStorage.getItem("neon-memes")||"[]");let n=0,o=[];t.forEach((c,m)=>{const g=K(c);n+=g,o.push(`#${m+1} - ~${(g/1024).toFixed(1)} KB`)});let a=0;for(let c=0;c<localStorage.length;c++){const m=localStorage.key(c),g=localStorage.getItem(m)||"";a+=(m.length+g.length)*2}let i="Cache Storage: n/a";if("caches"in window){const c=await caches.keys(),m=[];for(const g of c){const v=await(await caches.open(g)).keys();m.push(`${g}: ${v.length} item(s)`)}i=m.join(" | ")||"Cache Storage: empty"}e.textContent=`Local "neon-memes" items: ${t.length}
`+o.join(`
`)+`

Approx images total: ${(n/1024).toFixed(1)} KB
Estimated LocalStorage usage (all keys): ${(a/1024).toFixed(1)} KB
${i}

Tip: Clear with the "Clear All" button or via DevTools â†’ Application.`}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("inspectBtn"),t=document.getElementById("clearAllBtn"),n=document.getElementById("exportJsonBtn");e&&(e.onclick=D),t&&(t.onclick=()=>{confirm("Delete all saved memes on this device?")&&(localStorage.removeItem("neon-memes"),L(),D())}),n&&n.addEventListener("click",()=>{const o=localStorage.getItem("neon-memes")||"[]",a=new Blob([o],{type:"application/json"}),i=document.createElement("a");i.href=URL.createObjectURL(a),i.download="neon-memes-export.json",i.click(),URL.revokeObjectURL(i.href)})});function A(){const e=document.getElementById("heroParticles");if(e){e.innerHTML="";for(let t=0;t<15;t++){const n=document.createElement("div");n.className="particle",n.style.left=Math.random()*100+"%",n.style.top=Math.random()*100+"%",n.style.animationDelay=Math.random()*6+"s";const o=2+Math.random()*4;n.style.width=o+"px",n.style.height=o+"px",e.appendChild(n)}}}function Y(){const e={threshold:.1,rootMargin:"0px 0px -50px 0px"},t=new IntersectionObserver(n=>{n.forEach(o=>{o.isIntersecting&&(o.target.classList.add("fade-in-up"),t.unobserve(o.target))})},e);document.querySelectorAll(".card, .mission-card, .feature-item, .timeline-item, .faq-item, .feature-card").forEach(n=>{t.observe(n)})}function Q(){document.querySelectorAll(".page").forEach(t=>{t.style.transition="all 0.5s cubic-bezier(0.4, 0, 0.2, 1)"})}document.addEventListener("DOMContentLoaded",()=>{O(),P(),N(),C(),J(),L(),A(),Y(),Q(),setTimeout(()=>{const e=localStorage.getItem("memeLab-theme")||"dark";k(e),T(e),setTimeout(()=>{A()},500)},100)});
